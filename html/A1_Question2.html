
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Assigment 1 - Question 2</title><meta name="generator" content="MATLAB 9.11"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2022-02-04"><meta name="DC.source" content="A1_Question2.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; }

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }
span.typesection { color:#A0522D }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Assigment 1 - Question 2</h1><!--introduction--><p>Collisions with Mean Free Path (MFP) Jinseng Vanderkloot 101031534</p><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#2">Initialization of individual electron values</a></li><li><a href="#3">Electrons position and velocity arrays</a></li><li><a href="#4">Probability of Scatter</a></li></ul></div><pre class="codeinput"><span class="comment">%The purpose of this simulation is to allow the electrons to scatter as if</span>
<span class="comment">%making contact with another electron. This is done by randomizing the</span>
<span class="comment">%velocity in x and y when a randomly generated value is less then the</span>
<span class="comment">%probability of scattering. The temperature of the systems is monitored over</span>
<span class="comment">%time as the velocities of the particles will undergo net change. The Mean</span>
<span class="comment">%free path and mean time between collisions is also tracked (about the same</span>
<span class="comment">%but one is distance and the other is time). A histogram is produced to</span>
<span class="comment">%show the distribution of the velocities.</span>
</pre><h2 id="2">Initialization of individual electron values</h2><pre class="codeinput">m0 = 9.10938215e-31;            <span class="comment">% electron mass</span>
mn = 0.26*m0;                   <span class="comment">% Effective mass</span>
Temp = 300;                     <span class="comment">% Inital Temp (K)</span>
kb = 1.3806504e-23;             <span class="comment">% Boltzmann constant</span>
tmn = 0.2e-12;                  <span class="comment">% Mean time between collision</span>

<span class="comment">% Region Area</span>
wArea = 200e-9;
lArea = 100e-9;

<span class="comment">%Thermal Velocity (Question 1.A)</span>
vt=sqrt((2*kb*Temp)/mn);        <span class="comment">% Sim in 2D so (2*kb*Temp), 3D is (3*kb*Temp)</span>
</pre><h2 id="3">Electrons position and velocity arrays</h2><pre class="codeinput">numElec = 1000;                 <span class="comment">%Number of simulated Electrons</span>
numEPlot = 20;                  <span class="comment">%Number of plotted Electrons</span>
dt = (lArea*wArea);             <span class="comment">%Typically 1/100 of region size</span>
stepsTot = 200;                 <span class="comment">%Total amount of steps (1000 was a long simulation)</span>
tTot= stepsTot*dt;              <span class="comment">%Total Simulation time</span>
x = zeros(1,numElec);           <span class="comment">%Inital X matrix</span>
y = zeros(1,numElec);           <span class="comment">%Inital y matrix</span>
vx = zeros(1,numElec);          <span class="comment">%Inital velocity x matrix</span>
vy = zeros(1,numElec);          <span class="comment">%Inital velocity y matrix</span>
vtot = zeros(1,numElec);        <span class="comment">%Inital velocity matrix</span>
avgTemp=0;                      <span class="comment">%Set average Temp to 0</span>
</pre><h2 id="4">Probability of Scatter</h2><pre class="codeinput">scatOn = 1;                     <span class="comment">%Turn Scatter on (1) or off(0)</span>
Pscatter = 1-exp(-dt/tmn);      <span class="comment">%Scatter Equation</span>
tScatter = zeros(1,numElec);    <span class="comment">%track scatter for each particle</span>

<span class="comment">%Electron Graph initial</span>
<span class="keyword">for</span> cnt = 1:numElec
    x(cnt)=rand()*wArea;
    y(cnt)=rand()*lArea;
    vx(cnt)=sqrt(vt^2)*randn();  <span class="comment">% velocity * Gaussian dist</span>
    vy(cnt)=sqrt(vt^2)*randn();  <span class="comment">% velocity * Gaussian dist</span>
    <span class="comment">%Varience = sqrt(kT/m) - Do we use this?</span>
    vtot(cnt)= sqrt (vx(cnt)^2)+(vy(cnt)^2);
    colors= rand(numElec,3);     <span class="comment">%Random Color for each electron</span>
<span class="keyword">end</span>

<span class="comment">%Main Loop</span>
t=0;
intCNT = 1; <span class="comment">%Counter with time</span>
<span class="keyword">while</span> t &lt; tTot
    t = t + dt;

    <span class="comment">%Store old position</span>
    oldx = x;
    oldy = y;

    <span class="comment">%Update to new position</span>
    x(1:numElec) = x(1:numElec) + (vx(1:numElec).*dt);
    y(1:numElec) = y(1:numElec) + (vy(1:numElec).*dt);

    vtot(1:numElec)= sqrt ((vx(1:numElec).^2)+(vy(1:numElec).^2));


    <span class="keyword">for</span> check = 1:numElec
        <span class="comment">%Scatter</span>
        <span class="keyword">if</span> scatOn==1
            <span class="keyword">if</span> Pscatter &gt; rand()
                vx(check)=sqrt(vt^2 /2)*randn();
                vy(check)=sqrt(vt^2 /2)*randn();
                tScatter(check)= 0; <span class="comment">%If collision, time goes to 0</span>
            <span class="keyword">else</span>
                tScatter(check)= tScatter(check) + dt; <span class="comment">%track time increaing while no collision</span>
            <span class="keyword">end</span>
        <span class="keyword">end</span>

        <span class="comment">%Apply boundary conditions</span>
        <span class="comment">%If bottom contact, bounce off in opposite direction</span>
        <span class="keyword">if</span> (y(check)&lt;=0)
            y(check) = 0;
            vy(check) = -vy(check);
        <span class="keyword">end</span>
        <span class="comment">%If top contact, bounce off in opposite directio</span>
        <span class="keyword">if</span> (y(check)&gt;=lArea)
            y(check) = lArea;
            vy(check) = -vy(check);
        <span class="keyword">end</span>
        <span class="comment">%if left side of box, come out right side</span>
        <span class="keyword">if</span>(x(check)&lt;=0)
           x(check) = x(check) + wArea;
        <span class="keyword">end</span>
        <span class="comment">%if right side of box, come out left side</span>
        <span class="keyword">if</span>(x(check)&gt;=wArea)
          x(check) = x(check) - wArea;
        <span class="keyword">end</span>
    <span class="keyword">end</span>

    <span class="comment">%Plot Boundary and map some electrons</span>
    <span class="keyword">for</span> Eplot = 1:numEPlot
        figure(1)
        subplot (3,1,1)
        <span class="comment">%if the electron went out of sides and back on other side, do not</span>
        <span class="comment">%draw line</span>
        <span class="keyword">if</span> abs(oldx(Eplot)-x(Eplot))&lt;(wArea/2)
            p = plot([oldx(Eplot),x(Eplot)],[oldy(Eplot),y(Eplot)]);
        <span class="keyword">end</span>
        p.Color=colors(Eplot,:);
        axis([0,wArea,0,lArea]);
        title(<span class="string">'Electron Model'</span>), xlabel(<span class="string">'Position (m)'</span>, <span class="string">'FontSize'</span>, 10), ylabel(<span class="string">'Position (m)'</span>, <span class="string">'FontSize'</span>, 10);

        hold <span class="string">on</span>;
    <span class="keyword">end</span>
    pause(0.01);

    <span class="comment">%Calc Average Temp for all t and Plot</span>
    subplot (3,1,2)
    Time(:,intCNT) = t;
    allT = ((vtot(:).^2).*mn)./(2*kb);
    avgTemp(:,intCNT) = mean(allT);

    plot(Time,avgTemp,<span class="string">"r"</span>);
    title(<span class="string">'Averge Temp'</span>),xlabel(<span class="string">'Time (s)'</span>, <span class="string">'FontSize'</span>, 10), ylabel(<span class="string">'Temp (K)'</span>, <span class="string">'FontSize'</span>, 10), ylim([250,600]);
    hold <span class="string">on</span>;
    intCNT = intCNT +1;

    <span class="comment">%Histogram of velocities over time</span>
    subplot(3,3,7)
    histogram([vtot(:)],30)
    title(<span class="string">'Velocity Histgram'</span>),xlabel(<span class="string">'Velocity (m/s)'</span>, <span class="string">'FontSize'</span>, 10), ylabel(<span class="string">'Number of Particles'</span>, <span class="string">'FontSize'</span>, 10);

    <span class="comment">%Mean time between collision</span>
    Time(:,intCNT) = t;
    allScat(:,intCNT) = mean(tScatter(:));
    subplot(3,3,8)
    plot(Time,allScat,<span class="string">'r'</span>);
    title(<span class="string">'Mean Time between Collision'</span>),xlabel(<span class="string">'Time (s)'</span>, <span class="string">'FontSize'</span>, 10), ylabel(<span class="string">'Time(s)'</span>, <span class="string">'FontSize'</span>, 10);
    hold <span class="string">on</span>;

    <span class="comment">%Mean Free Path over time</span>
    Time(:,intCNT) = t;
    mfp(:,intCNT) = mean(tScatter(:))*mean(vtot(:));
    subplot(3,3,9)
    plot(Time,mfp,<span class="string">'r'</span>);
    title(<span class="string">'Mean Free Path '</span>),xlabel(<span class="string">'Time (s)'</span>, <span class="string">'FontSize'</span>, 10), ylabel(<span class="string">'Time(s)'</span>, <span class="string">'FontSize'</span>, 10);
    hold <span class="string">on</span>;

<span class="keyword">end</span>
</pre><pre class="codeoutput error">Error using plot
Vectors must be the same length.

Error in A1_Question2 (line 144)
    plot(Time,allScat,'r');
</pre><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2021b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Assigment 1 - Question 2
% Collisions with Mean Free Path (MFP) 
% Jinseng Vanderkloot 101031534
%% 
%The purpose of this simulation is to allow the electrons to scatter as if
%making contact with another electron. This is done by randomizing the
%velocity in x and y when a randomly generated value is less then the
%probability of scattering. The temperature of the systems is monitored over
%time as the velocities of the particles will undergo net change. The Mean
%free path and mean time between collisions is also tracked (about the same
%but one is distance and the other is time). A histogram is produced to
%show the distribution of the velocities.
%% Initialization of individual electron values

m0 = 9.10938215e-31;            % electron mass
mn = 0.26*m0;                   % Effective mass
Temp = 300;                     % Inital Temp (K)
kb = 1.3806504e-23;             % Boltzmann constant
tmn = 0.2e-12;                  % Mean time between collision 

% Region Area 
wArea = 200e-9;
lArea = 100e-9;

%Thermal Velocity (Question 1.A) 
vt=sqrt((2*kb*Temp)/mn);        % Sim in 2D so (2*kb*Temp), 3D is (3*kb*Temp)
%% Electrons position and velocity arrays
numElec = 1000;                 %Number of simulated Electrons 
numEPlot = 20;                  %Number of plotted Electrons 
dt = (lArea*wArea);             %Typically 1/100 of region size
stepsTot = 200;                 %Total amount of steps (1000 was a long simulation) 
tTot= stepsTot*dt;              %Total Simulation time 
x = zeros(1,numElec);           %Inital X matrix          
y = zeros(1,numElec);           %Inital y matrix  
vx = zeros(1,numElec);          %Inital velocity x matrix  
vy = zeros(1,numElec);          %Inital velocity y matrix
vtot = zeros(1,numElec);        %Inital velocity matrix
avgTemp=0;                      %Set average Temp to 0 
%% Probability of Scatter
scatOn = 1;                     %Turn Scatter on (1) or off(0)
Pscatter = 1-exp(-dt/tmn);      %Scatter Equation 
tScatter = zeros(1,numElec);    %track scatter for each particle 

%Electron Graph initial
for cnt = 1:numElec
    x(cnt)=rand()*wArea;
    y(cnt)=rand()*lArea;
    vx(cnt)=sqrt(vt^2)*randn();  % velocity * Gaussian dist   
    vy(cnt)=sqrt(vt^2)*randn();  % velocity * Gaussian dist 
    %Varience = sqrt(kT/m) - Do we use this? 
    vtot(cnt)= sqrt (vx(cnt)^2)+(vy(cnt)^2);
    colors= rand(numElec,3);     %Random Color for each electron 
end

%Main Loop
t=0;
intCNT = 1; %Counter with time
while t < tTot
    t = t + dt; 
    
    %Store old position 
    oldx = x;
    oldy = y;
    
    %Update to new position 
    x(1:numElec) = x(1:numElec) + (vx(1:numElec).*dt);
    y(1:numElec) = y(1:numElec) + (vy(1:numElec).*dt);

    vtot(1:numElec)= sqrt ((vx(1:numElec).^2)+(vy(1:numElec).^2));
    
 
    for check = 1:numElec
        %Scatter 
        if scatOn==1
            if Pscatter > rand()
                vx(check)=sqrt(vt^2 /2)*randn();
                vy(check)=sqrt(vt^2 /2)*randn();
                tScatter(check)= 0; %If collision, time goes to 0
            else
                tScatter(check)= tScatter(check) + dt; %track time increaing while no collision
            end
        end

        %Apply boundary conditions 
        %If bottom contact, bounce off in opposite direction
        if (y(check)<=0)
            y(check) = 0;
            vy(check) = -vy(check);
        end
        %If top contact, bounce off in opposite directio
        if (y(check)>=lArea)
            y(check) = lArea;
            vy(check) = -vy(check);
        end
        %if left side of box, come out right side 
        if(x(check)<=0)
           x(check) = x(check) + wArea;
        end
        %if right side of box, come out left side
        if(x(check)>=wArea)
          x(check) = x(check) - wArea;
        end
    end 

    %Plot Boundary and map some electrons
    for Eplot = 1:numEPlot
        figure(1)
        subplot (3,1,1)
        %if the electron went out of sides and back on other side, do not
        %draw line
        if abs(oldx(Eplot)-x(Eplot))<(wArea/2)
            p = plot([oldx(Eplot),x(Eplot)],[oldy(Eplot),y(Eplot)]);
        end
        p.Color=colors(Eplot,:);
        axis([0,wArea,0,lArea]);
        title('Electron Model'), xlabel('Position (m)', 'FontSize', 10), ylabel('Position (m)', 'FontSize', 10);
        
        hold on;
    end 
    pause(0.01);
    
    %Calc Average Temp for all t and Plot 
    subplot (3,1,2)
    Time(:,intCNT) = t;
    allT = ((vtot(:).^2).*mn)./(2*kb);
    avgTemp(:,intCNT) = mean(allT);
     
    plot(Time,avgTemp,"r");
    title('Averge Temp'),xlabel('Time (s)', 'FontSize', 10), ylabel('Temp (K)', 'FontSize', 10), ylim([250,600]); 
    hold on;
    intCNT = intCNT +1; 
    
    %Histogram of velocities over time 
    subplot(3,3,7)
    histogram([vtot(:)],30)
    title('Velocity Histgram'),xlabel('Velocity (m/s)', 'FontSize', 10), ylabel('Number of Particles', 'FontSize', 10);

    %Mean time between collision  
    Time(:,intCNT) = t;
    allScat(:,intCNT) = mean(tScatter(:));
    subplot(3,3,8)
    plot(Time,allScat,'r');
    title('Mean Time between Collision'),xlabel('Time (s)', 'FontSize', 10), ylabel('Time(s)', 'FontSize', 10);
    hold on;
   
    %Mean Free Path over time 
    Time(:,intCNT) = t;
    mfp(:,intCNT) = mean(tScatter(:))*mean(vtot(:));
    subplot(3,3,9)
    plot(Time,mfp,'r');
    title('Mean Free Path '),xlabel('Time (s)', 'FontSize', 10), ylabel('Time(s)', 'FontSize', 10);
    hold on;
    
end 
##### SOURCE END #####
--></body></html>